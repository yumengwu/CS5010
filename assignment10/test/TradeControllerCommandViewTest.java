import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.UnsupportedEncodingException;

import org.junit.Before;
import org.junit.Test;

import static junit.framework.TestCase.fail;
import static org.junit.Assert.assertEquals;

import java.io.StringReader;

import tradestock.controller.TradeController;
import tradestock.model.stock.Stock;
import tradestock.model.tradeoperation.TradeModel;
import tradestock.model.tradeoperation.TradeOperation;
import tradestock.view.CommandView;
import tradestock.view.IView;

/**
 * A Junit test for trade controller and command view.
 */
public class TradeControllerCommandViewTest {
  private TradeOperation<Stock> model1;
  private TradeController controller1;
  private IView view1;
  private Readable in;
  private Appendable out;
  private Appendable out1;
  private TradeOperation<Stock> model2;

  @Before
  public void setUp() {
    model1 = new TradeModel();
    out = new StringBuilder();
  }

  @Test
  public void testInvalidConstructor() {
    try {
      IView view = new CommandView(in, out);
      fail();
    }
    catch (IllegalArgumentException e) {
      assertEquals("neither in or out can be null", e.getMessage());
    }
    in = new StringReader("q");

    try {
      IView view1 = new CommandView(in, out1);
      fail();
    }
    catch (IllegalArgumentException e) {
      assertEquals("neither in or out can be null", e.getMessage());
    }
    try {
      controller1 = new TradeController(model1, view1);
      fail();
    }
    catch (IllegalArgumentException e) {
      assertEquals("either model or view is null", e.getMessage());
    }
    view1 = new CommandView(in, out);
    try {
      controller1 = new TradeController(model2, view1);
      fail();
    }
    catch (IllegalArgumentException e) {
      assertEquals("either model or view is null", e.getMessage());
    }
  }

  @Test
  public void testCreateMultiplePortfoliosThenShow() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio third created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio fourth created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Following are all portfolios: \n"
        + "first\n"
        + "second\n"
        + "third\n"
        + "fourth\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 first 1 second 1 third 1 fourth 2 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCreateExistPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: Portfolio name already exists.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 first 1 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testShowAllPortfolioBeforeCreateAny() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Following are all portfolios: \n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("2 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testShowAnExistPortfolioDetail() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "The detail of first is\n"
        + "\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 first 3 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testShowAnNotExistPortfolioDetail() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("3 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  //Create multiple portfolios, buy stocks into different portfolios, check cost basis and value
  //in different portfolios.
  @Test
  public void complicateTest() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 300.0 shares to first on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 300.0 shares to first on 2019-03-19\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock AMZN 300.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio third created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOGL 100.0 shares to third on 2019-02-13\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of first at 2019-02-14 is $336506.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of first at 2019-03-19 is $336531.25\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio first by now is $336531.25\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of second at 2019-02-14 is $486800.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of second at 2019-03-19 is $486800.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio second by now is $486800.0\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of third at 2019-02-01 is $0.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of third at 2019-03-19 is $120246.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of portfolio third by now is $124001.0\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 first 5 first GOOG 300 2019-02-14 1 second "
        + "5 first MFST 300 2019-03-19 5 second amzn 300 2019-02-14 1 third 5 third googl 100 "
        + "2019-02-13 8 2019-02-14 first 8 2019-03-19 first 7 first 8 2019-02-14 second 8 "
        + "2019-03-19 second 7 second 10 2019-02-01 third 10 2019-03-19 third 9 third q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testBuyStocksInDifferentDateThenShowPortfolioDetail() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 300.0 shares to first on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 100.0 shares to first on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "The detail of first is\n"
        + "GOOG: 300.0\n"
        + "MFST: 100.0\n"
        + "\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 first 5 first GOOG 300 2019-02-14 5 first mfst 100 2019-02-15 3 "
        + "first Q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testBuyStocksToANotExistPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("5 second GOOG 50 2019-02-14 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testBuyStockInvalidStockSymbol() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Execution Failed. Please try again Reason: Text '    \"Error Message\": \""
        + "Invalid API call. Please retry or visit th...' could not be parsed at index 0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second abab 50 2019-02-14 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testBuyStockInvalidVolume() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Invalid volume, please try again\n"
        + "\n"
        + "Enter a number represents volume: \n"
        + "Invalid volume, please try again\n"
        + "\n"
        + "Enter a number represents volume: \n"
        + "Invalid volume, please try again\n"
        + "\n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog -50 -20 -10 40 2019-02-14 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testBuyStockInvalidDate() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Execution Failed. Please try again Reason: Date cannot be after now\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2039-02-14 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());

    String except1 = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio s created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Execution Failed. Please try again Reason: Cannot buy in holiday.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    Readable in1 = new StringReader("1 s 5 second goog 40 2019-02-16 q");
    Appendable out1 = new StringBuilder();
    IView view2 = new CommandView(in1, out1);
    TradeController controller2 = new TradeController(model1, view2);
    controller2.execute();
    assertEquals(except1, out1.toString());

    String except2 = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Invalid Date Text '02/16/2019' could not be parsed at index 0\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Invalid Date Text '2019/02/16' could not be parsed at index 4\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Invalid Date Text '2019-18-16' could not be parsed: Invalid value for MonthOfYear"
        + " (valid values 1 - 12): 18\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-06\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    Readable in2 = new StringReader("1 first 5 second goog 40 02/16/2019 2019/02/16 2019-18-16 "
        + "2019-02-06 q");
    Appendable out2 = new StringBuilder();
    IView view3 = new CommandView(in2, out2);
    TradeController controller3 = new TradeController(model1, view3);
    controller3.execute();
    assertEquals(except2, out2.toString());
  }

  @Test
  public void testCostBasisByDateInDifferentDate() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of second at 2019-02-14 is $44871.8\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of second at 2019-02-15 is $44881.490000000005\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 5 second MFST 50 2019-02-15 "
        + "8 2019-02-14 second 8 2019-02-15 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCostBasisByDateInvalidPortfolioName() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("8 2019-02-15 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCostBasisByDateNotExistPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: Date cannot be after now\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 5 second MFST 50 2019-02-15 8 "
        + "2030-03-01 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCostBasisByDateEmptyPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 8 "
        + "2019-02-14 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCostBasis() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio second by now is $44881.490000000005\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 5 second MFST 50 2019-02-15 7 "
        + "second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCostBasisByDateDifferentDateSameProfile() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of second at 2019-02-15 is $44871.8\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of second at 2019-02-16 is $44871.8\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of second at 2019-02-28 is $44871.8\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 8 2019-02-15 second 8 2019-02-16"
        + " second 8 2019-02-28 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCostBasisNotExistPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 5 second MFST 50 2019-02-15 7 "
        + "first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCostBasisEmptyPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio first by now is $0.0\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 1 first 5 second goog 40 2019-02-14 7 "
        + "first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testTotalValueByDifferentDate() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of second at 2019-02-14 is $44866.8\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of second at 2019-02-15 is $44550.69\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 5 second MFST 50 2019-02-15 10 "
        + "2019-02-14 second 10 2019-02-15 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testTotalValueByDateOfNotExistPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 5 second MFST 50 2019-02-15 10 "
        + "2019-02-14 first 10 2019-02-15 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testTotalValueByDateEmptyPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of second at 2019-02-14 is $0.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of second at 2019-02-15 is $0.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 10 2019-02-14 second 10 2019-02-15 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testTotalValueByDateInvalidDate() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: Date cannot be after now\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 5 second MFST 50 2019-02-15 10"
        + " 2039-02-14 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testTotalValueByDateDifferentDateSameProfile() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of second at 2019-02-15 is $44546.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of second at 2019-03-14 is $47422.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of second at 2019-03-18 is $47370.4\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 10 2019-02-15 second 10 "
        + "2019-03-14 second 10 2019-03-18 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testTotalValueNotExistPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 40 2019-02-14 5 second MFST 50 2019-02-15 9"
        + " first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testTotalValueEmptyPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of portfolio second by now is $0.0\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 9 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testShowAnExistPortfolioDetailByDifferentDate() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 40.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock MFST 50.0 shares to second on 2019-02-15\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Detail of portfolio second by 2019-02-14 is: \n"
        + "GOOG: 40.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Detail of portfolio second by 2019-02-15 is: \n"
        + "GOOG: 40.0\n"
        + "MFST: 50.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 1 first 5 second goog 40 2019-02-14 5 second MFST 50 "
        + "2019-02-15 4 second 2019-02-14 4 second 2019-02-15 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testShowAnNotExistPortfolioDetailByDate() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 4 first 2019-02-14 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testShowPortfolioDetailByDateInvalidDate() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Execution Failed. Please try again Reason: Date cannot be after now\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 4 second 2039-03-14 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testPortfolioDetailByDateEmptyPortfolio() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Detail of portfolio second by 2019-02-14 is: \n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 4 second 2019-02-14 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testRunOutOfInput() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n";
    in = new StringReader("1 first");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    try {
      controller1.execute();
    }
    catch (IllegalStateException e) {
      assertEquals("Appendable Fail.\n", e.getMessage());
    }
    assertEquals(except, out.toString());
  }

  @Test
  public void testSetAPI() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 10.0 shares to first on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio first by now is $11221.7\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1 - Use Alpha Vantage API\n"
        + "2 - Use Mock API\n"
        + "\n"
        + "API set\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 10.0 shares to first on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio first by now is $12226.7\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 first 5 first goog 10 2019-02-14 7 first 11 2 "
        + "5 first goog 10 2019-02-14 7 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testSetCommissionFee() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 10.0 shares to first on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a commission fee: \n"
        + "Set commission fee as 20.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 10.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio first by now is $11236.7\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio second by now is $11236.7\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 first 5 first goog 10 2019-02-14 12 20 1 second 5 second goog "
        + "10 2019-02-14 7 first 7 second q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void savePortfolioToFile() {
    String except = "";
    in = new StringReader("1 first 5 first goog 10 2019-02-14 6 first goog 1500 2019-03-01 6 "
        + "first amaz 5000 2019-03-09 1 second 5 second goog 10 2019-02-14 13 first filename q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    String encode = "UTF-8";
    File file = new File("filename");
    Long fileLength = file.length();
    byte[] fileContent = new byte[fileLength.intValue()];
    try {
      FileInputStream in = new FileInputStream(file);
      in.read(fileContent);
      in.close();
    }
    catch (FileNotFoundException e) {
      throw new IllegalArgumentException(e.getMessage());
    }
    catch (IOException e) {
      throw new IllegalArgumentException(e.getMessage());
    }
    try {
      except =  new String(fileContent, encode);
    }
    catch (UnsupportedEncodingException e) {
      throw new IllegalArgumentException(e.getMessage());
    }
    String e = "<portfolio>\n"
        + "\t<portfolio-name>first</portfolio-name>\n"
        + "\t<stock>\n"
        + "\t\t<stock-symbol>GOOG</stock-symbol>\n"
        + "\t\t<transaction-history>\n"
        + "\t\t\t<date>2019-02-14</date>\n"
        + "\t\t\t<sell>false</sell>\n"
        + "\t\t\t<volume>10.0</volume>\n"
        + "\t\t\t<cost>1121.67</cost>\n"
        + "\t\t</transaction-history>\n"
        + "\t\t<transaction-history>\n"
        + "\t\t\t<date>2019-03-01</date>\n"
        + "\t\t\t<sell>false</sell>\n"
        + "\t\t\t<volume>1.314647805852812</volume>\n"
        + "\t\t\t<cost>1140.99</cost>\n"
        + "\t\t</transaction-history>\n"
        + "\t</stock>\n"
        + "</portfolio>\n";
    assertEquals(e, except);
  }

  @Test
  public void saveStrategy() {
    String except = "";
    in = new StringReader("16 1 s1 1 2019-01-12 10 4000 goog 2019-12-12 19 s111 s1 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    String encode = "UTF-8";
    File file = new File("s111");
    Long fileLength = file.length();
    byte[] fileContent = new byte[fileLength.intValue()];
    try {
      FileInputStream in = new FileInputStream(file);
      in.read(fileContent);
      in.close();
    }
    catch (FileNotFoundException e) {
      throw new IllegalArgumentException(e.getMessage());
    }
    catch (IOException e) {
      throw new IllegalArgumentException(e.getMessage());
    }
    try {
      except =  new String(fileContent, encode);
    }
    catch (UnsupportedEncodingException e) {
      throw new IllegalArgumentException(e.getMessage());
    }
    String e = "<strategy>\n"
        + "\t<strategy-name>s1</strategy-name>\n"
        + "\t<stock-list>\n"
        + "\t\t<stock>\n"
        + "\t\t\t<stock-symbol>GOOG</stock-symbol>\n"
        + "\t\t\t<stock-weight>1.0</stock-weight>\n"
        + "\t\t</stock>\n"
        + "\t</stock-list>\n"
        + "\t<begin-date>2019-01-12</begin-date>\n"
        + "\t<end-date>2019-12-12</end-date>\n"
        + "\t<amount>4000.0</amount>\n"
        + "\t<day>10</day>\n"
        + "</strategy>\n";
    assertEquals(e, except);
    String except1 = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the file name: (if file is at/going to a specific path, enter the path, "
        + "too or file will save/read at the current path)\n"
        + "Read s111\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio p1 created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add GOOG to p1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Input strategy name: \n"
        + "Apply s1 to p1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of p1 at 2019-04-01 is $32040.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("18 s111 1 p1 15 goog p1 17 p1 s1 8 2019-04-01 p1 q");
    out = new StringBuilder();
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except1, out.toString());
  }

  //read file create by last test.
  @Test
  public void readPortfolioExistsPortfolio() {
    String expect = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the file name: (if file is at/going to a specific path, enter the path, too or "
        + "file will save/read at the current path)\n"
        + "Read portfolio from filename\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "The detail of first is\n"
        + "GOOG: 11.314647805852811\n"
        + "\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 first 14 filename 3 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(expect, out.toString());
  }

  @Test
  public void testReadPortfolioThenBuyCheckCostCheckValueSetAPI() {
    String except = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio second created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 10.0 shares to second on 2019-02-14\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio second by now is $11221.7\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of portfolio second by now is $12330.8\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the file name: (if file is at/going to a specific path, enter the path, " +
            "too or file will save/read at the current path)\n"
        + "Read portfolio from filename\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "The detail of first is\n"
        + "GOOG: 11.314647805852811\n"
        + "\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio first by now is $12726.7\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of first at 2019-02-13 is $0.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of portfolio first by now is $13951.865916440984\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Invalid Date Text 'first' could not be parsed at index 0\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Following are all portfolios: \n"
        + "second\n"
        + "first\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of portfolio first by now is $13951.865916440984\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("1 second 5 second goog 10 2019-02-14 7 second 9 second 14 "
        + "filename 3 first 7 first 8 2019-02-13 first 9 first 10 first 2019-02-14 11 2 9 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(except, out.toString());
  }

  @Test
  public void testCreateStrategy1() {
    String expect = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Input an end date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Execution Failed. Please try again Reason: Invalid stock list.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Append the 1th Stock: \n"
        + "Append the 2th Stock: \n"
        + "Input an end date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter a weight for stock GOOG(decimal, eg:0.2)\n"
        + "Enter a weight for stock AMAZ(decimal, eg:0.2)\n"
        + "Strategy s1 created\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio s1 created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add GOOG to s1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add AMAZ to s1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Input strategy name: \n"
        + "Apply s1 to s1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of s1 at 2019-04-12 is $8020.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of s1 at 2018-12-12 is $0.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio s2 created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock GOOG 1.0 shares to s2 on 2019-03-12\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter the stock symbol: \n"
        + "Enter a number represents volume: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Buy Stock AMAZ 1.0 shares to s2 on 2019-03-12\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Input strategy name: \n"
        + "Apply s1 to s2\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio s2 by now is $9223.525\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("16 2 s1 0 2019-03-12 30 4000 2019-06-15 16 2 s1 2 2019-03-12 30 4000 "
        + "goog amaz 2019-09-15 0.5 0.5 1 s1 15 goog s1 15 amaz s1 17 s1 s1 8 2019-04-12 s1 8 "
        + "2018-12-12 s1 1 s2 5 s2 goog 1 2019-03-12 5 s2 amaz 1 2019-03-12 17 s2 s1 7 s2 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(expect, out.toString());
  }

  @Test
  public void createAndApplyStrategy() {
    String expect = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Append the 1th Stock: \n"
        + "Append the 2th Stock: \n"
        + "Input an end date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Strategy s1 created\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio first created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add GOOG to first\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Input strategy name: \n"
        + "Execution Failed. Please try again Reason: Stocks between portfolio and strategy do "
        + "not match.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add AMAZ to first\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Input strategy name: \n"
        + "Apply s1 to first\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "The detail of first is\n"
        + "GOOG: 10.299312400760986\n"
        + "AMAZ: 42328.848346834886\n"
        + "\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("16 1 s1 2 2019-02-03 30 8000 goog amaz 2019-09-08 1 first 15 GOOG "
        + "first 17 first s1 15 AMAZ first 17 first s1 3 first q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(expect, out.toString());
  }

  @Test
  public void testStrategySameName() {
    String expect = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Append the 1th Stock: \n"
        + "Strategy s1 created\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Append the 1th Stock: \n"
        + "Append the 2th Stock: \n"
        + "Execution Failed. Please try again Reason: Strategy already exists.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("16 3 s1 1 2019-01-01 1 3000 goog 16 3 s1 2 2019-03-12 3 4000 goog "
        + "amaz q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(expect, out.toString());
  }

  @Test
  public void testStrategyBuyOnHoliday() {
    String expect = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Append the 1th Stock: \n"
        + "Append the 2th Stock: \n"
        + "Input an end date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter a weight for stock GOOG(decimal, eg:0.2)\n"
        + "Enter a weight for stock AMAZ(decimal, eg:0.2)\n"
        + "Strategy s1 created\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio p1 created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add AMAZ to p1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add GOOG to p1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Input strategy name: \n"
        + "Apply s1 to p1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of portfolio p1 by now is $64160.0\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Detail of portfolio p1 by 2019-01-01 is: \n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of p1 at 2019-01-01 is $0.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of p1 at 2019-01-02 is $4010.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("16 2 s1 2 2019-01-01 7 4000 goog amaz 2019-10-01 0.8 0.2 1 p1 15 amaz"
        + " p1 15 goog p1 17 p1 s1 7 p1 4 p1 2019-01-01 8 2019-01-01 p1 8 2019-01-02 p1 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(expect, out.toString());
  }

  @Test
  public void testPeriod() {
    String expect = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Append the 1th Stock: \n"
        + "Append the 2th Stock: \n"
        + "Append the 3th Stock: \n"
        + "Execution Failed. Please try again Reason: Stock list is invalid.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Append the 1th Stock: \n"
        + "Append the 2th Stock: \n"
        + "Append the 3th Stock: \n"
        + "Append the 4th Stock: \n"
        + "Append the 5th Stock: \n"
        + "Strategy s1 created\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio f1 created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add GOOG to f1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: Stock already exists.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add AAPL to f1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add AMAZ to f1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add FB to f1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: Stock already exists.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add AMZN to f1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Input strategy name: \n"
        + "Apply s1 to f1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of f1 at 2019-01-01 is $0.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of f1 at 2019-01-02 is $4025.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of f1 at 2019-01-11 is $4025.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of f1 at 2019-01-12 is $4025.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of f1 at 2019-01-13 is $4025.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of f1 at 2019-01-14 is $8050.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of f1 at 2019-01-01 is $0.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of f1 at 2019-01-02 is $4000.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total value of f1 at 2019-02-12 is $17988.55742411414\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Detail of portfolio f1 by 2019-01-01 is: \n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Detail of portfolio f1 by 2019-01-02 is: \n"
        + "GOOG: 0.7649280489553952\n"
        + "AAPL: 5.065856129685917\n"
        + "AMAZ: 3811.3387327298715\n"
        + "FB: 5.89622641509434\n"
        + "AMZN: 0.5197741581282932\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("16 3 s1 3 2019-01-01 10 4000 goog goog goog 16 3 s1 5 2019-01-01 10 "
        + "4000 goog amaz amzn aapl fb 1 f1 15 goog f1 15 goog f1 15 aapl p1 15 aapl f1 15 amaz f1 "
        + "15 fb f1 15 fb f1 15 amzn f1 17 f1 s1 8 2019-01-01 f1 8 2019-01-02 f1 8 2019-01-11 f1 "
        + "8 2019-01-12 f1 8 2019-01-13 f1 8 2019-01-14 f1 10 2019-01-01 f1 10 2019-01-02 f1 10 "
        + "2019-02-12 f1 4 f1 2019-01-01 4 f1 2019-01-02 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(expect, out.toString());
  }

  @Test
  public void testStopInvestAfterEndDate() {
    String expect = "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "1- create a strategy provide an end date with all stocks have equal weight\n"
        + "2- create a strategy provide an end date and specify the weight of every stock\n"
        + "3- create a strategy without an end date with all stocks have equal weight\n"
        + "4- create a strategy without an end date and specify the weight of every stock\n"
        + "Input strategy name: \n"
        + "Enter the number of stocks in this strategy: \n"
        + "Input a start date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the interval(days): \n"
        + "Input how much money you want to invest to buy the stock: \n"
        + "Append the 1th Stock: \n"
        + "Input an end date: \n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Strategy s1 created\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Portfolio p1 created\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Execution Failed. Please try again Reason: No such portfolio.\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the stock symbol: \n"
        + "Enter the name for the portfolio: \n"
        + "Add GOOG to p1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter the name for the portfolio: \n"
        + "Input strategy name: \n"
        + "Apply s1 to p1\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of p1 at 2018-05-01 is $4005.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of p1 at 2018-06-01 is $8010.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Enter a date: yyyy-mm-dd\n"
        + "Enter the name for the portfolio: \n"
        + "Total cost basis of p1 at 2019-03-01 is $8010.0\n"
        + "\n"
        + "Please enter the correspond number to execute commands:\n"
        + "1 - Create a new portfolio.\n"
        + "2 - Show all portfolio.\n"
        + "3 - show detail of a portfolio\n"
        + "4 - show detail of a portfolio by a given date\n"
        + "5 - Buy stocks by a given number of shares\n"
        + "6 - Buy stocks by a given amount of money\n"
        + "7 - Check total cost basis of a portfolio\n"
        + "8 - Check total cost basis of a portfolio by a given date\n"
        + "9 - Check total value of a portfolio\n"
        + "10 - Check total value of a portfolio by a given date\n"
        + "11 - Set API\n"
        + "12 - Set commission fee\n"
        + "13 - Save portfolio to file\n"
        + "14 - Read a portfolio from file\n"
        + "15 - Add a stock to portfolio\n"
        + "16 - Create an invest strategy\n"
        + "17 - Apply strategy to portfolio\n"
        + "18 - Read A Strategy From File\n"
        + "19 - Save A Strategy To File\n"
        + "q/Q - quit the system.\n"
        + "\n"
        + "Trade quit prematurely.\n"
        + "\n";
    in = new StringReader("16 1 s1 1 2018-05-01 30 4000 GOOG 2018-06-01 1 p1 15 goog f1 15 goog "
        + "p1 17 p1 s1 8 2018-05-01 p1 8 2018-06-01 p1 8 2019-03-01 p1 q");
    view1 = new CommandView(in, out);
    controller1 = new TradeController(model1, view1);
    controller1.execute();
    assertEquals(expect, out.toString());
  }

}
